import{a as ae}from"./chunk-YZNVFPQC.js";import{A as le,H as me,a as J,d as K,e as X,f as Y,l as Z,m as ee,o as te,q as ie,r as ne,u as oe,v as re,w as se,z as pe}from"./chunk-CZ2NUMSF.js";import{a as Q,c as L,i as q,l as G,q as k}from"./chunk-MVRUEOTI.js";import"./chunk-JGYM447R.js";import{$ as w,Ab as s,Ba as V,Bb as j,Fb as F,Hb as c,Jb as v,Jc as I,Kc as H,Nb as D,Ob as z,Pb as W,Qc as U,Rb as u,Tb as _,Ub as A,Vb as R,Wa as B,Wb as $,Ya as l,Za as d,_ as M,da as N,g as E,ja as P,ka as x,ob as g,qb as m,sa as f,ta as S,u as T,zb as a}from"./chunk-JFRIYQGL.js";var y=class{constructor(){this.brandId=0,this.typeId=0,this.typeSort=1,this.sort=3,this.search="",this.pageSize=12,this.pageIndex=1}};var C=(()=>{let t=class t{constructor(e){this.http=e,this.backendUrl=J.backendUrl,this.shopParams=new y}getShopParams(){return this.shopParams}updateShopParams(e){this.shopParams=e}getProducts(){let e=this.generateShopParams();return this.http.get(this.backendUrl+"/products",{params:e})}getProduct(e){return this.http.get(`${this.backendUrl}/products/${e}`)}generateShopParams(){let e=new Q;return this.shopParams.search&&(e=e.append("search",this.shopParams.search)),this.shopParams.brandId&&this.shopParams.brandId>0&&(e=e.append("brandId",this.shopParams.brandId)),this.shopParams.typeId&&this.shopParams.typeId>0&&(e=e.append("typeId",this.shopParams.typeId)),e=e.append("pageIndex",this.shopParams.pageIndex),e=e.append("pageSize",this.shopParams.pageSize),e=e.append("sort",this.shopParams.sort),e=e.append("typeSort",this.shopParams.typeSort),e}getBrands(e=!0){return this.http.get(`${this.backendUrl}/productBrand`).pipe(T(n=>(e&&(n=[{id:0,title:"\u0647\u0645\u0647"},...n]),n)))}getTypes(e=!0){return this.http.get(`${this.backendUrl}/productType`).pipe(T(n=>(e&&(n=[{id:0,title:"\u0647\u0645\u0647"},...n]),n)))}};t.\u0275fac=function(n){return new(n||t)(N(L))},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function ve(i,t){if(i&1&&(a(0,"option",8),u(1),s()),i&2){let r=t.$implicit;m("value",r==null?null:r.id),l(),_(" ",r==null?null:r.title," ")}}function Pe(i,t){if(i&1&&(a(0,"option",8),u(1),s()),i&2){let r=t.$implicit;m("value",r==null?null:r.id),l(),_(" ",r==null?null:r.title," ")}}function ye(i,t){if(i&1&&(a(0,"option",9),u(1),s()),i&2){let r=t.$implicit,e=v();m("selected",r.key===(e.shopParams==null?null:e.shopParams.sort))("value",r==null?null:r.key),l(),_(" ",r==null?null:r.title," ")}}function Ce(i,t){if(i&1&&(a(0,"option",9),u(1),s()),i&2){let r=t.$implicit,e=v();m("selected",r.key===(e.shopParams==null?null:e.shopParams.typeSort))("value",r==null?null:r.key),l(),_(" ",r==null?null:r.title," ")}}var he=(()=>{let t=class t{constructor(e){this.shopService=e,this.updateParams=new V,this.sortOptions=[{key:1,title:"\u0639\u0646\u0648\u0627\u0646"},{key:2,title:"\u0646\u0648\u0639 \u0645\u062D\u0635\u0648\u0644"},{key:3,title:"\u0642\u06CC\u0645\u062A"}],this.sortTypeOptions=[{key:1,title:"\u0632\u06CC\u0627\u062F \u0628\u0647 \u06A9\u0645"},{key:2,title:"\u06A9\u0645 \u0628\u0647 \u0632\u06CC\u0627\u062F"}]}onChangTypes(e){this.shopParams.typeId=e,this.shopService.updateShopParams(this.shopParams),this.updateParams.emit(!0)}onChangeBrands(e){this.shopParams.brandId=e,this.shopService.updateShopParams(this.shopParams),this.updateParams.emit(!0)}onChangeSort(e){this.shopParams.sort=e,this.shopService.updateShopParams(this.shopParams),this.updateParams.emit(!0)}onChangeSortType(e){this.shopParams.typeSort=e,this.shopService.updateShopParams(this.shopParams),this.updateParams.emit(!0)}getTypes(){this.shopService.getTypes().subscribe(e=>{this.types=e})}getBrands(){this.shopService.getBrands().subscribe(e=>{this.brands=e})}ngOnInit(){this.shopParams=this.shopService.getShopParams(),this.getBrands(),this.getTypes()}};t.\u0275fac=function(n){return new(n||t)(d(C))},t.\u0275cmp=P({type:t,selectors:[["app-shop-filters"]],outputs:{updateParams:"updateParams"},decls:36,vars:4,consts:[[1,"w-100","px-1","mb-2"],[1,"sticky-top"],[1,"list-group","shadow"],[1,"list-group-item","d-flex","gap-3","active","text-start"],[1,"form-checked-content"],[1,"form-select","rounded-bottom","rounded-0",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"selected","value",4,"ngFor","ngForOf"],[3,"value"],[3,"selected","value"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"section",1)(2,"div",2)(3,"label",3)(4,"span",4)(5,"strong"),u(6,"\u0646\u0648\u0639"),s()()(),a(7,"select",5),c("change",function(p){return o.onChangTypes(p.target==null?null:p.target.value)}),g(8,ve,2,2,"option",6),s()()()(),a(9,"div",0)(10,"section",1)(11,"div",2)(12,"label",3)(13,"span",4)(14,"strong"),u(15,"\u0628\u0631\u0646\u062F"),s()()(),a(16,"select",5),c("change",function(p){return o.onChangeBrands(p.target==null?null:p.target.value)}),g(17,Pe,2,2,"option",6),s()()()(),a(18,"div",0)(19,"section",1)(20,"div",2)(21,"label",3)(22,"span",4)(23,"strong"),u(24,"\u0646\u0648\u0639 \u0645\u0631\u062A\u0628 \u0633\u0627\u0632\u06CC"),s()()(),a(25,"select",5),c("change",function(p){return o.onChangeSort(p.target==null?null:p.target.value)}),g(26,ye,2,3,"option",7),s()()()(),a(27,"div",0)(28,"section",1)(29,"div",2)(30,"label",3)(31,"span",4)(32,"strong"),u(33,"\u0635\u0639\u0648\u062F\u06CC \u0646\u0632\u0648\u0644\u06CC"),s()()(),a(34,"select",5),c("change",function(p){return o.onChangeSortType(p.target==null?null:p.target.value)}),g(35,Ce,2,3,"option",7),s()()()()),n&2&&(l(8),m("ngForOf",o.types),l(9),m("ngForOf",o.brands),l(9),m("ngForOf",o.sortOptions),l(9),m("ngForOf",o.sortTypeOptions))},dependencies:[I,oe,re]});let i=t;return i})();var be=["search"];function we(i,t){if(i&1&&(a(0,"div",12),j(1,"app-card-shop",13),s()),i&2){let r=t.$implicit;l(),m("product",r)}}function xe(i,t){if(i&1){let r=F();a(0,"div",14)(1,"div",15)(2,"pagination",16),c("pageChanged",function(n){f(r);let o=v();return S(o.onPageChange(n))}),$("ngModelChange",function(n){f(r);let o=v();return R(o.shopParams.pageIndex,n)||(o.shopParams.pageIndex=n),S(n)}),s()()()}if(i&2){let r=v();l(2),m("totalItems",r.data.count)("itemsPerPage",r.shopParams.pageSize),A("ngModel",r.shopParams.pageIndex)}}var ue=(()=>{let t=class t{constructor(e){this.shopService=e,this.sub$=new E,this.sidenavOpen=!0}ngOnInit(){this.onWindowResize(),this.getProducts(),this.shopParams=this.shopService.getShopParams()}onPageChange(e){this.shopParams.pageIndex=e.page,this.shopService.updateShopParams(this.shopParams),this.getProducts()}onReset(){this.shopParams=new y,this.shopService.updateShopParams(this.shopParams),this.searchTerm.nativeElement.value="",this.getProducts()}onSearch(){this.shopParams.search=this.searchTerm.nativeElement.value,this.shopService.updateShopParams(this.shopParams),this.getProducts()}onWindowResize(){window.innerWidth<960?this.sidenavOpen=!1:this.sidenavOpen=!0}getProducts(){let e=this.shopService.getProducts().subscribe(n=>{this.data=n});this.sub$.add(e)}updateParams(e){e&&this.getProducts()}ngOnDestroy(){this.sub$.unsubscribe()}};t.\u0275fac=function(n){return new(n||t)(d(C))},t.\u0275cmp=P({type:t,selectors:[["app-shop"]],viewQuery:function(n,o){if(n&1&&D(be,5),n&2){let h;z(h=W())&&(o.searchTerm=h.first)}},hostBindings:function(n,o){n&1&&c("resize",function(){return o.onWindowResize()},!1,B)},decls:15,vars:4,consts:[["search",""],[1,"mat-sidenav",3,"opened","mode"],[3,"updateParams"],[1,"mat-content"],[1,"row","w-50","mb-3"],[1,"d-flex"],["type","search","placeholder","\u062C\u0633\u062A\u062C\u0648 \u06A9\u0646\u06CC\u062F ...",1,"form-control","me-2",3,"keyup.enter"],["type","submit",1,"btn","btn-outline-success",3,"click"],["type","submit",1,"btn","btn-outline-danger",3,"click"],[1,"row","w-100"],["class","col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 mb-2",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","col-xl-2","mb-2"],[3,"product"],[1,"row"],[1,"col-xs-12","col-12"],["previousText","\u2039","nextText","\u203A","firstText","\xAB","lastText","\xBB",3,"pageChanged","ngModelChange","totalItems","itemsPerPage","ngModel"]],template:function(n,o){if(n&1){let h=F();a(0,"mat-sidenav-container")(1,"mat-sidenav",1)(2,"app-shop-filters",2),c("updateParams",function(ge){return f(h),S(o.updateParams(ge))}),s()(),a(3,"mat-sidenav-content",3)(4,"div",4)(5,"form",5)(6,"input",6,0),c("keyup.enter",function(){return f(h),S(o.onSearch())}),s(),a(8,"button",7),c("click",function(){return f(h),S(o.onSearch())}),u(9,"\u062C\u0633\u062A\u062C\u0648"),s(),a(10,"button",8),c("click",function(){return f(h),S(o.onReset())}),u(11,"\u062D\u0630\u0641"),s()()(),a(12,"div",9),g(13,we,2,1,"div",10),s(),g(14,xe,3,3,"div",11),s()()}n&2&&(l(),m("opened",o.sidenavOpen)("mode",o.sidenavOpen?"side":"over"),l(12),m("ngForOf",o.data==null?null:o.data.result),l(),m("ngIf",(o.data==null?null:o.data.result.length)>0))},dependencies:[I,H,ne,Z,ee,ie,te,pe,X,Y,K,le,he]});let i=t;return i})();var ce=(()=>{let t=class t{constructor(e,n,o,h){this.shopService=e,this.bc=n,this.route=o,this.title=h,this.id=Number(this.route.snapshot?.paramMap.get("id"))}ngOnInit(){this.shopService.getProduct(this.id).subscribe(e=>{this.bc.set("@ProductDetail",e.title),this.title.setTitle(e?.title)})}};t.\u0275fac=function(n){return new(n||t)(d(C),d(ae),d(G),d(q))},t.\u0275cmp=P({type:t,selectors:[["app-shop-detail"]],decls:2,vars:0,template:function(n,o){n&1&&(a(0,"p"),u(1,"shop-detail works!"),s())}});let i=t;return i})();var Ie=[{path:"",pathMatch:"full",component:ue},{path:":id",pathMatch:"full",component:ce,data:{breadcrumb:{alias:"ProductDetail"}}}],de=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=x({type:t}),t.\u0275inj=w({imports:[k.forChild(Ie),k]});let i=t;return i})();var ot=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=x({type:t}),t.\u0275inj=w({imports:[U,se,de,me]});let i=t;return i})();export{ot as ShopModule};
